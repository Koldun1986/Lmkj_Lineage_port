From 099f59cfd019f6a352564f930ad552686554e03b Mon Sep 17 00:00:00 2001
From: vgdn1942 <vgdn1942@gmail.com>
Date: Tue, 31 Oct 2017 18:25:38 +0300
Subject: [PATCH] Improving & fixing of hwui crashing

Change-Id: I394273f643b7411ecfd52ea559560bdcb4e76a3b
---
 libs/hwui/Caches.cpp | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/libs/hwui/Caches.cpp b/libs/hwui/Caches.cpp
index 2763e89..09ad1a8 100644
--- a/libs/hwui/Caches.cpp
+++ b/libs/hwui/Caches.cpp
@@ -87,6 +87,7 @@ void Caches::initFont() {
 }
 
 void Caches::initExtensions() {
+#ifndef MTK_HARDWARE
     if (mExtensions.hasDebugMarker()) {
         eventMark = glInsertEventMarkerEXT;
 
@@ -97,6 +98,11 @@ void Caches::initExtensions() {
         startMark = startMarkNull;
         endMark = endMarkNull;
     }
+#else
+         eventMark = eventMarkNull;
+         startMark = startMarkNull;
+         endMark = endMarkNull;
+#endif
 }
 
 void Caches::initConstraints() {
-- 
2.7.4

